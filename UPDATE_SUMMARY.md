# ๐ ููุฎุต ุงูุชุญุฏูุซ - ูุธุงู ุงูุชูุนูู ุงูุฌุฏูุฏ

## โ ุชู ุงูุชุญุฏูุซ ุจุงููุงูู!

### ๐ฏ ูุง ุชู ุชุบููุฑู:

#### 1. ูุงุนุฏุฉ ุงูุจูุงูุงุช
- โ **ุงููุฏูู**: ุฌุฏูู `email_subscriptions`
- โ **ุงูุฌุฏูุฏ**: ุฌุฏูู `macro_subscriptions`

#### 2. ุงูุญููู ุงูุฌุฏูุฏุฉ
```sql
-- ุงูุญููู ุงููุถุงูุฉ:
subscription_start (timestamp): ุชุงุฑูุฎ ุจุฏุงูุฉ ุงูุงุดุชุฑุงู
last_check (timestamp): ุขุฎุฑ ุชุญูู ูู ุงูุฌูุงุฒ  
notes (text): ููุงุญุธุงุช ุฅุฏุงุฑูุฉ

-- ุชุฑุชูุจ ุงูุญููู ุงูุฌุฏูุฏ:
email โ hardware_id โ is_active โ subscription_start โ order_id โ last_check โ notes
```

#### 3. ููุทู ุงูุชูุนูู ุงููุญุฏุซ
```
ุงููุณุชุฎุฏู ูุฏุฎู ุงูุจุฑูุฏ ููุท
    โ
ุชูููุฏ Hardware ID ุชููุงุฆูุงู
    โ
ุฅุฑุณุงู ุฅูู authenticate_user()
    โ
ูุญุต ุงูุจุฑูุฏ ูู macro_subscriptions
    โ
ุฅุฐุง hardware_id = NULL โ ุญูุธ ุงูู ID ุงูุฌุฏูุฏ
ุฅุฐุง hardware_id ูุทุงุจู โ ูุจูู + ุชุญุฏูุซ last_check  
ุฅุฐุง hardware_id ูุฎุชูู โ ุฑูุถ + ุฎูุงุฑ ุฅุนุงุฏุฉ ุงูุฑุจุท
```

#### 4. ุงููููุงุช ุงููุญุฏุซุฉ
- โ `Database/supabase_setup.sql` - ุงูุฌุฏูู ูุงูุฏูุงู ุงูุฌุฏูุฏุฉ
- โ `Models/UserSubscription.cs` - ุงููููุฐุฌ ุงููุญุฏุซ
- โ `Services/AuthenticationService.cs` - ููุทู ุงูุชูุนูู ุงูุฌุฏูุฏ
- โ ุฌููุน ูููุงุช ุงูุชูุซูู ูุงูุชุนูููุงุช

## ๐ง ููููุฉ ุงูุชุทุจูู:

### 1. ูู Supabase
```sql
-- ููุฐ ูุฐุง ุงูููุฏ ูู SQL Editor:
-- (ูุญุชูู ููู Database/supabase_setup.sql)

-- ุซู ุฃุถู ูุณุชุฎุฏู ููุงุฎุชุจุงุฑ:
INSERT INTO macro_subscriptions (
    email, 
    order_id, 
    is_active, 
    subscription_start
) VALUES (
    'test@sr3h.com', 
    'SR3H001', 
    true, 
    NOW()
);
```

### 2. ูู ุงูุชุทุจูู
```bash
# ุงุฎุชุจุงุฑ ุงููุธุงู ุงูุฌุฏูุฏ
./test_new_auth.bat

# ุฃู ุชุดุบูู ูุจุงุดุฑ
dotnet run
```

## ๐ฎ ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู ุงูุฌุฏูุฏุฉ:

### ุงูุชูุนูู ุงูุนุงุฏู:
1. ุงููุณุชุฎุฏู ูุฏุฎู: `test@sr3h.com`
2. ุงูุชุทุจูู ูููุฏ Hardware ID ุชููุงุฆูุงู
3. ุฑุณุงูุฉ ูุฌุงุญ: "ุชู ุชูุนูู ุงูุงุดุชุฑุงู ุจูุฌุงุญ"

### ุฅุนุงุฏุฉ ุฑุจุท ุงูุฌูุงุฒ:
1. ุฅุฐุง ุธูุฑุช: "ุงูุงุดุชุฑุงู ูุฑุชุจุท ุจุฌูุงุฒ ุขุฎุฑ"
2. ุงููุณุชุฎุฏู ูุถุบุท "ุฅุนุงุฏุฉ ุฑุจุท ุงูุฌูุงุฒ"
3. ูุฏุฎู ุงูุจุฑูุฏ: `test@sr3h.com`
4. ูุฏุฎู ุฑูู ุงูุทูุจ: `SR3H001`
5. ุฑุณุงูุฉ ูุฌุงุญ: "ุชู ุฅุนุงุฏุฉ ุชุนููู ุงูุงุดุชุฑุงู ุจูุฌุงุญ"
6. ูุนูุฏ ููุดุงุดุฉ ุงูุฑุฆูุณูุฉ ููุญุงูู ูุฑุฉ ุฃุฎุฑู

## ๐ ุงูุฃูุงู ุงููุญุณู:

### Hardware ID ุงูุฌุฏูุฏ:
- ูุนุชูุฏ ุนูู CPU ID + MAC Address + HDD Serial
- ุฃูุซุฑ ุชุนููุฏุงู ูุตุนูุจุฉ ูู ุงูุชุฒููุฑ
- ูุชู ุชูููุฏู ุชููุงุฆูุงู ุฏูู ุชุฏุฎู ุงููุณุชุฎุฏู

### ุงูุชุดููุฑ ุงููุญูู:
- ุญูุธ ุจูุงูุงุช ุงูุชูุนูู ูุดูุฑุฉ
- ูุชุฑุฉ ุณูุงุญ 30 ููู ููุนูู offline
- ุชุญูู ุฏูุฑู ุนูุฏ ุชููุฑ ุงูุฅูุชุฑูุช

## ๐ ูุฑุงูุจุฉ ุงููุดุงุท:

### ุงูุญููู ุงูุฌุฏูุฏุฉ ูููุฑุงูุจุฉ:
- `subscription_start`: ูุชู ุจุฏุฃ ุงูุงุดุชุฑุงู
- `last_check`: ุขุฎุฑ ูุฑุฉ ุชู ุงูุชุญูู ูู ุงูุฌูุงุฒ
- `notes`: ููุงุญุธุงุช ุฅุฏุงุฑูุฉ (ุชุณุฌูู ุฅุนุงุฏุฉ ุงูุฑุจุทุ ุฅูุฎ)

### ุงุณุชุนูุงูุงุช ูููุฏุฉ:
```sql
-- ุนุฑุถ ุฌููุน ุงููุณุชุฎุฏููู ุงููุดุทูู
SELECT email, hardware_id, last_check 
FROM macro_subscriptions 
WHERE is_active = true;

-- ุงููุณุชุฎุฏููู ุงูุฐูู ูู ูุชุญูููุง ููุฐ ูุชุฑุฉ
SELECT email, last_check 
FROM macro_subscriptions 
WHERE last_check < NOW() - INTERVAL '7 days';
```

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ:

### ูููุทูุฑ:
1. โ ููุฐ SQL ุงูุฌุฏูุฏ ูู Supabase
2. โ ุฃุถู ูุณุชุฎุฏููู ููุงุฎุชุจุงุฑ  
3. โ ุดุบู `test_new_auth.bat` ููุชุฃูุฏ
4. โ ุงุฎุชุจุฑ ุงูุชูุนูู ูุฅุนุงุฏุฉ ุงูุฑุจุท

### ูููุดุฑ:
1. โ ุจูุงุก ุงูุชุทุจูู: `./build.bat`
2. โ ุงุฎุชุจุงุฑ ุงูููู ุงูููุงุฆู
3. โ ุชูุฒูุน ุงูุชุทุจูู ูุน ุงูุชุนูููุงุช

---
**๐ฏ ุงููุธุงู ุงูุฌุฏูุฏ ุฌุงูุฒ ููุญุฏุซ ุจุงููุงูู!**  
**ูุงูุฑู ุณุฑุนุฉุ ูุนุทูู ุงูุณุฑุนุฉ!** ๐  
ยฉ 2024 SR3H.com