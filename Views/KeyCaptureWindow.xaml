<Window x:Class="MacroApp.Views.KeyCaptureWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="اختيار المفتاح - Key Selection" 
        Height="200" 
        Width="400"
        ResizeMode="NoResize"
        WindowStyle="ToolWindow"
        FlowDirection="RightToLeft"
        KeyDown="Window_KeyDown">
    
    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="../Styles/AppStyles.xaml"/>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Window.Resources>

    <Grid Background="{StaticResource BackgroundBrush}" Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- العنوان -->
        <StackPanel Grid.Row="0" HorizontalAlignment="Center" Margin="0,0,0,20">
            <TextBlock Text="اضغط على المفتاح المطلوب" 
                       FontSize="16" 
                       FontWeight="SemiBold" 
                       HorizontalAlignment="Center"
                       Foreground="{StaticResource TextBrush}"/>
        </StackPanel>

        <!-- منطقة عرض المفتاح -->
        <Border Grid.Row="1" 
                Background="{StaticResource SurfaceBrush}"
                BorderBrush="{StaticResource BorderBrush}"
                BorderThickness="2"
                CornerRadius="8"
                Padding="20">
            <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                <TextBlock x:Name="KeyDisplayText" 
                           Text="..." 
                           FontSize="24" 
                           FontWeight="Bold" 
                           HorizontalAlignment="Center"
                           Foreground="Black"/>
                <TextBlock Text="في انتظار ضغطة المفتاح..." 
                           FontSize="12" 
                           HorizontalAlignment="Center"
                           Foreground="{StaticResource TextSecondaryBrush}"
                           Margin="0,10,0,0"/>

            </StackPanel>
        </Border>

        <!-- الأزرار -->
        <StackPanel Grid.Row="2" 
                    Orientation="Horizontal" 
                    HorizontalAlignment="Center" 
                    Margin="0,20,0,0">
            <Button x:Name="OkButton"
                    Content="موافق" 
                    Style="{StaticResource ModernButton}"
                    Width="80"
                    Height="35"
                    Margin="0,0,10,0"
                    Click="OkButton_Click"
                    IsDefault="True"
                    IsEnabled="False"/>
            <Button Content="مسح" 
                    Style="{StaticResource ModernButton}"
                    Width="60"
                    Height="35"
                    Margin="0,0,10,0"
                    Click="ClearButton_Click"/>
            <Button Content="إلغاء" 
                    Style="{StaticResource ModernButton}"
                    Width="80"
                    Height="35"
                    Click="CancelButton_Click"
                    IsCancel="True"/>
        </StackPanel>
    </Grid>
</Window>