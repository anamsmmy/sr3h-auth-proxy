# ๐ ูุธุงู ุงูุชูุนูู ุงูุฌุฏูุฏ - ูุงูุฑู ุณุฑุนุฉ

## โ ุชู ุงูุชุญุฏูุซ ุจุงููุงูู!

### ๐ ุงูุชุบููุฑุงุช ุงููููุฉ:

#### 1. ุงูุฌุฏูู ุงูุฌุฏูุฏ: `macro_subscriptions`
```sql
-- ุงูุญููู ุงูุฌุฏูุฏุฉ:
email (text): ุจุฑูุฏ ุงููุณุชุฎุฏู
hardware_id (text): ูุนุฑู ุงูุฌูุงุฒ  
is_active (bool): ุชูุนูู ุงูุงุดุชุฑุงู
subscription_start (timestamp): ุชุงุฑูุฎ ุงูุชูุนูู
order_id (text, nullable): ุฑูู ุงูุทูุจ
last_check (timestamp, nullable): ุขุฎุฑ ุชุญูู ูู ุงูุฌูุงุฒ
notes (text, nullable): ููุงุญุธุงุช ุฅุฏุงุฑูุฉ
```

#### 2. ููุทู ุงูุชูุนูู ุงูุฌุฏูุฏ:
- โ ูุทูุจ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ููุท ูู ุงููุณุชุฎุฏู
- โ ูููุฏ Hardware ID ุชููุงุฆูุงู ูู ุฎุตุงุฆุต ุงูุฌูุงุฒ
- โ ูุฑุณู ุงูุจูุงูุงุช ุฅูู Supabase ููุชุญูู
- โ ูุญูุธ ุงููุชูุฌุฉ ูุญููุงู ูุน ุชุดููุฑ

#### 3. ุฎุทูุงุช ุงูุชุญูู:
1. **ุงูุจุญุซ ุนู ุงูุจุฑูุฏ**: ุฅุฐุง ูู ููุฌุฏ โ ุฑูุถ
2. **ูุญุต ุงูุชูุนูู**: ุฅุฐุง `is_active = false` โ ุฑูุถ  
3. **ูุญุต Hardware ID**:
   - ุฅุฐุง `NULL` โ ุญูุธ ุงูู ID ุงูุฌุฏูุฏ ููุจูู
   - ุฅุฐุง ูุทุงุจู โ ูุจูู ูุชุญุฏูุซ `last_check`
   - ุฅุฐุง ูุฎุชูู โ ุฑูุถ ูุน ุฑุณุงูุฉ "ูุฑุชุจุท ุจุฌูุงุฒ ุขุฎุฑ"

#### 4. ุฅุนุงุฏุฉ ุฑุจุท ุงูุฌูุงุฒ:
- ูุทูุจ ุงูุจุฑูุฏ + ุฑูู ุงูุทูุจ
- ุฅุฐุง ุชุทุงุจูุช ุงูุจูุงูุงุช โ ูุนูุฏ ุชุนููู `hardware_id = NULL`
- ูู ุงูุชุดุบูู ุงูุชุงูู ุณูุชู ุฑุจุท ุงูุฌูุงุฒ ุงูุฌุฏูุฏ

## ๐ง ุฅุนุฏุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช:

### 1. ุชูููุฐ SQL ุงูุฌุฏูุฏ
```bash
# ูู Supabase SQL Editor
# ููุฐ ูุญุชูู ููู: Database/supabase_setup.sql
```

### 2. ุฅุถุงูุฉ ูุณุชุฎุฏู ููุงุฎุชุจุงุฑ
```sql
INSERT INTO macro_subscriptions (
    email, 
    order_id, 
    is_active, 
    subscription_start, 
    notes
) VALUES (
    'test@sr3h.com', 
    'SR3H001', 
    true, 
    NOW(), 
    'Test user for macro application'
);
```

## ๐ฏ ุงูุฏูุงู ุงููุญุฏุซุฉ:

### 1. `authenticate_user(user_email, user_hardware_id)`
- ูุชุญูู ูู ุงูุจุฑูุฏ ูุงูุชูุนูู
- ูุญูุธ ุฃู ูุชุญูู ูู Hardware ID
- ูุญุฏุซ `last_check` ุนูุฏ ุงููุฌุงุญ

### 2. `verify_authentication(user_email, user_hardware_id)`  
- ููุชุญูู ุงูุฏูุฑู ูู ุตุญุฉ ุงูุงุดุชุฑุงู
- ูุญุฏุซ `last_check` ุนูุฏ ุงููุฌุงุญ

### 3. `reactivate_subscription(user_email, user_order_id)`
- ูุฅุนุงุฏุฉ ุฑุจุท ุงูุฌูุงุฒ ุงูุฌุฏูุฏ
- ูุชุทูุจ ุงูุจุฑูุฏ ูุฑูู ุงูุทูุจ
- ูุนูุฏ ุชุนููู `hardware_id = NULL`

## ๐ ุงูุฃูุงู ุงููุญุณู:

### Hardware ID ุงููุทูุฑ:
```csharp
// ูุนุชูุฏ ุนูู:
- CPU ID (ูุนุฑู ุงููุนุงูุฌ)
- MAC Address (ุนููุงู ุงูุดุจูุฉ)  
- HDD Serial (ุฑูู ุงููุฑุต ุงูุตูุจ)
- Motherboard Serial (ุฑูู ุงูููุญุฉ ุงูุฃู)
```

### ุงูุชุดููุฑ ุงููุญูู:
- ุญูุธ ุจูุงูุงุช ุงูุชูุนูู ูุดูุฑุฉ ูุญููุงู
- ูุชุฑุฉ ุณูุงุญ 30 ููู ููุนูู offline
- ุชุญูู ุฏูุฑู ุนูุฏ ุชููุฑ ุงูุฅูุชุฑูุช

## ๐ ููููุฉ ุงูุงุณุชุฎุฏุงู:

### ูููุทูุฑ:
1. ููุฐ SQL ุงูุฌุฏูุฏ ูู Supabase
2. ุฃุถู ูุณุชุฎุฏููู ูู ุงูุฌุฏูู
3. ุดุบู ุงูุชุทุจูู ูุงุฎุชุจุฑ ุงูุชูุนูู

### ูููุณุชุฎุฏู ุงูููุงุฆู:
1. ุดุบู ุงูุชุทุจูู
2. ุฃุฏุฎู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ููุท
3. ุงุถุบุท "ุชูุนูู ุงูุงุดุชุฑุงู"
4. ุฅุฐุง ุธูุฑุช ุฑุณุงูุฉ "ูุฑุชุจุท ุจุฌูุงุฒ ุขุฎุฑ":
   - ุงุถุบุท "ุฅุนุงุฏุฉ ุฑุจุท ุงูุฌูุงุฒ"
   - ุฃุฏุฎู ุงูุจุฑูุฏ ูุฑูู ุงูุทูุจ
   - ุฃุนุฏ ุงููุญุงููุฉ

## ๐ ูุซุงู ุนูู ุงูุจูุงูุงุช:

```sql
-- ุฅุถุงูุฉ ูุณุชุฎุฏู ุฌุฏูุฏ
INSERT INTO macro_subscriptions (
    email, 
    order_id, 
    is_active, 
    subscription_start
) VALUES (
    'customer@example.com',
    'SR3H12345', 
    true,
    NOW()
);

-- ุนุฑุถ ุฌููุน ุงููุณุชุฎุฏููู
SELECT 
    email,
    hardware_id,
    is_active,
    subscription_start,
    last_check,
    order_id
FROM macro_subscriptions;
```

## โจ ุงููููุฒุงุช ุงูุฌุฏูุฏุฉ:

### 1. ุชุชุจุน ุฃูุถู:
- `last_check`: ุขุฎุฑ ูุฑุฉ ุชู ุงูุชุญูู ูู ุงูุฌูุงุฒ
- `subscription_start`: ุชุงุฑูุฎ ุจุฏุงูุฉ ุงูุงุดุชุฑุงู
- `notes`: ููุงุญุธุงุช ุฅุฏุงุฑูุฉ

### 2. ูุฑููุฉ ุฃูุจุฑ:
- ุฅุนุงุฏุฉ ุฑุจุท ุณููุฉ ููุฃุฌูุฒุฉ ุงูุฌุฏูุฏุฉ
- ุชุชุจุน ูุดุงุท ุงููุณุชุฎุฏููู
- ุฅุฏุงุฑุฉ ุฃูุถู ููุงุดุชุฑุงูุงุช

### 3. ุฃูุงู ูุญุณู:
- Hardware ID ุฃูุซุฑ ุชุนููุฏุงู
- ุชุดููุฑ ูุญูู ููุจูุงูุงุช
- ูุญุต ุฏูุฑู ููุชุญูู ูู ุงูุตุญุฉ

---
**ูุงูุฑู ุณุฑุนุฉุ ูุนุทูู ุงูุณุฑุนุฉ!** ๐  
ยฉ 2024 SR3H.com - ูุธุงู ุงูุชูุนูู ุงููุญุฏุซ